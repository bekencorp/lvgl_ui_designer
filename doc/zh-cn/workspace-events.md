# 🎯 事件系统

事件系统用于为组件添加交互功能，实现用户与界面的交互行为。

## 📍 访问事件编辑器

事件编辑器位于**属性面板**的"事件"标签页中：

1. 选中要添加事件的组件
2. 在右侧属性面板中，点击 **"事件"** 标签页
3. 即可看到事件编辑器界面


## 🎨 事件系统概述

事件系统允许您为组件配置交互行为，当用户与组件交互时（如点击、长按等），可以触发相应的动作（如页面跳转、修改属性等）。

### 事件系统工作流程

```
用户交互 → 触发事件 → 执行动作 → 界面响应
```

例如：
- 用户点击按钮 → 触发 `LV_EVENT_CLICKED` 事件 → 执行"页面跳转"动作 → 跳转到目标页面

## ➕ 添加事件

### 步骤 1：打开事件编辑器

1. 选中要添加事件的组件
2. 在属性面板中找到 **"事件"** 标签页
3. 点击 **"添加事件"** 按钮

### 步骤 2：选择事件类型

选择触发事件的条件，常用事件类型包括：

**输入交互事件**
- **LV_EVENT_CLICKED**：组件被点击时触发（最常用）
- **LV_EVENT_DOUBLE_CLICKED**：组件被双击时触发
- **LV_EVENT_LONG_PRESSED**：组件被长按时触发
- **LV_EVENT_PRESSED**：组件被按下时触发
- **LV_EVENT_RELEASED**：组件被释放时触发

**焦点事件**
- **LV_EVENT_FOCUSED**：组件获得焦点时触发
- **LV_EVENT_DEFOCUSED**：组件失去焦点时触发

**值变化事件**
- **LV_EVENT_VALUE_CHANGED**：组件值改变时触发（如滑块移动、输入框输入）

**滚动事件**
- **LV_EVENT_SCROLL**：组件滚动时触发

### 步骤 3：选择动作类型

选择事件触发后要执行的动作：

- **页面跳转**：跳转到指定页面
- **修改属性**：修改组件的一个或多个属性值
- **修改样式**：修改组件的一个或多个样式属性
- **调用函数**：调用自定义函数

### 步骤 4：配置动作参数

根据选择的动作类型，配置相应的参数：

#### 页面跳转参数

**目标页面**
- 从下拉列表中选择要跳转到的页面

**动画类型**
- **none**：无动画
- **fade_in / fade_out**：淡入淡出
- **move_left / move_right / move_top / move_bottom**：滑动效果
- **over_left / over_right / over_top / over_bottom**：覆盖效果
- **out_left / out_right / out_top / out_bottom**：移出效果

**动画时长**
- 设置动画持续时间（毫秒），默认 300ms

**动画延迟**
- 设置动画延迟时间（毫秒），默认 0ms

#### 修改属性参数

**目标组件**
- 选择要修改的组件（默认为当前组件）
- 可以从下拉列表中选择页面中的其他组件

**属性列表**
- 点击 **"添加属性"** 按钮
- 选择要修改的属性（如 Text、Width、Height 等）
- 输入新的属性值
- 可以添加多个属性修改项

#### 修改样式参数

**目标组件**
- 选择要修改的组件（默认为当前组件）

**样式部分**
- 选择要修改的样式部分（如 Main、Indicator、Scrollbar 等）

**样式状态**
- 选择要修改的样式状态（如 Default、Pressed、Focused 等）

**样式属性列表**
- 点击 **"添加样式属性"** 按钮
- 选择要修改的样式属性（如背景颜色、字体大小、边框宽度等）
- 输入新的样式属性值
- 可以添加多个样式属性修改项

#### 调用函数参数

**函数名**
- 输入要调用的函数名称（如 `handleButtonClick`）

**函数参数**
- 输入传递给函数的参数（JSON 格式）
- 例如：`{"param1": "value1", "param2": 123}`

### 步骤 5：保存事件

1. **可选**：添加事件描述（用于说明事件用途，便于后续维护）
2. 点击 **确认** 按钮保存事件
3. 事件将出现在事件列表中

## ✏️ 编辑事件

### 编辑现有事件

1. 在事件列表中点击要编辑的事件
2. 修改事件类型、动作类型或参数
3. 点击 **确认** 按钮保存修改

### 删除事件

有两种方式删除事件：

**方式 1：从事件列表删除**
- 在事件列表中，点击事件右侧的 **删除** 按钮
- 确认删除操作

**方式 2：从编辑模式删除**
- 点击事件进入编辑模式
- 点击编辑表单头部的 **删除** 按钮
- 确认删除操作

## 📋 事件列表

事件列表显示当前组件的所有事件，包括：

- **事件类型**：显示触发条件（如 CLICKED、LONG_PRESSED）
- **动作类型**：显示执行的动作（如页面跳转、修改属性）
- **描述**：显示事件描述（如果有）
- **操作按钮**：编辑、删除


## 🎯 事件连线可视化

在画布中，您可以查看事件与目标组件之间的连线关系：

1. 在画布工具栏的 **视图** 菜单中，选择 **显示事件连线**
2. 画布中将显示事件与目标组件之间的连线
3. 点击连线可以快速定位到对应的事件配置

## ⚠️ 注意事项

1. **组件必须选中**：只有选中组件后，才能在属性面板中看到事件标签页
2. **事件验证**：保存事件前，系统会验证事件配置的完整性
3. **代码生成**：事件会在生成的代码中执行
4. **事件顺序**：多个事件按添加顺序执行
5. **目标组件**：修改属性/样式时，确保目标组件存在且可访问

## 🔗 相关功能

- **[属性面板](workspace-properties.md)** - 事件编辑器位于属性面板中
- **[画布](workspace-canvas.md)** - 在画布中查看事件连线
- **[组件树](workspace-tree.md)** - 管理组件层级关系

---

**工作台文档**：[← 返回工作台](workspace.md) | [画布](workspace-canvas.md) | [组件库](workspace-components.md) | [组件树](workspace-tree.md) | [属性面板](workspace-properties.md) | [事件系统](workspace-events.md) | [工具栏](workspace-toolbar.md) | [快捷键](workspace-shortcuts.md)

